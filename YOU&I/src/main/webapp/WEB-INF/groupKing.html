<!DOCTYPE html>
<!--
	Striped by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>가입승인</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css">
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

	<!-- FullCalendar CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.7.0/main.min.css">

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- Bootstrap JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

	<!-- FullCalendar JS -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/fullcalendar@5.7.0/main.min.js"></script>

	<style>
		@font-face {
    font-family: 'iceJaram-Rg';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2307-2@1.0/iceJaram-Rg.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
}
#dd{
	font-size:100px;
	font-family: 'iceJaram-Rg';
	text-align: center;
	color: black;
	margin-top:130px;
	margin-bottom:150px;
     
	}
	</style>
</head>

<body class="is-preload">

	<!-- Content -->
	<div id="content">
		<!-- 배너 이미지 -->
		<div id="dd"></div>
		<div id="" name="applicant">
			<h1 id="applicant">가입신청자</h1>
		</div>
		<div class="modal fade" id="calendarModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">신청자 정보</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<div id="userId">
								<h3>사용자 ID</h3>
							</div>
							<div id="gender">
								<h3>성별</h3>
							</div>
							<div id="area">
								<h3>활동지역</h3>
							</div>
							<div id="userHobby">
								<h3>취미</h3>
							</div>
							<div id="profileImg">
								<h3>프로필 사진</h3>
							</div>

						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-warning" id="agree">수락</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal" id="refuse">거절</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Sidebar -->
	<div id="sidebar">

		<!-- Logo -->
		<h1 id="logo"><a href="#">YOU & I</a></h1>

		<!-- Nav -->
		<nav id="nav">
			<ul id="sideService">
				<li><a id="modifyprofile" href="Gomainpg.do">프로필설정</a></li>
				<li><a id="clubmember" href="Goclubmember.do">멤버</a></li>
				<li><a id="community" href="Gocommunity.do">게시글</a></li>
				<li><a id="clubfee" href="Goclubfee.do">회비관리</a></li>
				<li><a id="" href="채팅방.html">채팅방</a></li>
				<li><a id="groupSchedules" href="GogroupSchedules.do">그룹일정</a></li>
			</ul>
		</nav>

		<!-- Search -->
		<section class="box search">
			<form method="post" action="#">
				<input type="text" class="text" name="search" placeholder="소모임 검색" />
			</form>
		</section>

		<!-- Text -->
		<section class="box text-style1">
			<div class="inner">
				<p>
					<strong>그룹소개</strong>
				</p>
				<p id="groupinfo">
					
				</p>
			</div>
		</section>

		<!-- Recent Posts -->
		<!-- 
		<section class="box recent-posts">
			
			<header>
				<h2>Recent Posts</h2>
			</header>
			<ul>
				<li><a href="#">Lorem ipsum dolor</a></li>
				<li><a href="#">Feugiat nisl aliquam</a></li>
				<li><a href="#">Sed dolore magna</a></li>
				<li><a href="#">Malesuada commodo</a></li>
				<li><a href="#">Ipsum metus nullam</a></li>
			</ul>
			
		</section>

		<!-- Recent Comments ->
		<section class="box recent-comments">
			<header>
				<h2>Recent Comments</h2>
			</header>
			<ul>
				<li>case on <a href="#">Lorem ipsum dolor</a></li>
				<li>molly on <a href="#">Sed dolore magna</a></li>
				<li>case on <a href="#">Sed dolore magna</a></li>
			</ul>
		</section>
		-->
		<!-- Calendar -->
		<section class="box calendar">
			<div class="inner">
				<table>
					<caption><span class="month">July</span><span class="year"> 2014</span></caption>
					<thead>
						<tr>
							<th scope="col" title="Monday">M</th>
							<th scope="col" title="Tuesday">T</th>
							<th scope="col" title="Wednesday">W</th>
							<th scope="col" title="Thursday">T</th>
							<th scope="col" title="Friday">F</th>
							<th scope="col" title="Saturday">S</th>
							<th scope="col" title="Sunday">S</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="3" class="pad"><span>&nbsp;</span></td>
							<td><span>1</span></td>
							<td><span>2</span></td>
							<td><span>3</span></td>
							<td><span>4</span></td>
						</tr>
						<tr>
							<td><span>5</span></td>
							<td><a href="#">6</a></td>
							<td><span>7</span></td>
							<td><span>8</span></td>
							<td><span>9</span></td>
							<td><a href="#">10</a></td>
							<td><span>11</span></td>
						</tr>
						<tr>
							<td><span>12</span></td>
							<td><span>13</span></td>
							<td class="today"><a href="#">14</a></td>
							<td><span>15</span></td>
							<td><span>16</span></td>
							<td><span>17</span></td>
							<td><span>18</span></td>
						</tr>
						<tr>
							<td><span>19</span></td>
							<td><span>20</span></td>
							<td><span>21</span></td>
							<td><span>22</span></td>
							<td><a href="#">23</a></td>
							<td><span>24</span></td>
							<td><a href="#">25</a></td>
						</tr>
						<tr>
							<td><span>26</span></td>
							<td><span>27</span></td>
							<td><span>28</span></td>
							<td><span>29</span></td>
							<td><span>30</span></td>
							<td class="pad" colspan="2"><span>&nbsp;</span></td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>

		<!-- Copyright -->
		<ul id="copyright">
			<li>&copy; Untitled.</li>
			<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
		</ul>

	</div>

	<!-- Scripts -->
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script>
		let date = new Date();
		let result_date = String(date).split(" ");
		let day = result_date[2];
		let month = result_date[1];
		let year = result_date[3];

		console.log(day);

		$(".month").html(day + " ");
		$(".day").html(month + " ");
		$(".year").html(year + " ");

	</script>
	<script src="assets/js/communiyjs/findking.js"></script>
	<script>
		$(document).ready(function () {
			$("#calendarModal").on("show.bs.modal", function (event) {
				var button = $(event.relatedTarget);
				var index = button.data("index"); // data-index 속성을 통해 인덱스 얻기
				var res = button.data("res");

				$("#userId").html("<h2> 사용자 ID : " + res[index].id + "</h2>");
				$("#gender").html("<h2> 성별 : " + res[index].gender + "</h2>");
				$("#area").html("<h2> 활동 지역 : " + res[index].region + "</h2>");
				$("#userHobby").html("<h2> 취미 : " + res[index].hobby + "</h2>");
				$("#profileImg").html("<h2> 프로필사진 : " + res[index].profileImg + "</h2>");

				// agree 클릭 이벤트
				$("#agree").off().on("click", function (event) {
					$.ajax({
						url: 'acceptUser.do',
						dataType: 'json',
						data: {
							id: res[index].id,
							groupNo: res[index].groupNo
						},
						success: function () {
							console.log("수락 통신 성공");
							$("#calendarModal").modal('hide');
							$("#applicantLink" + index).remove();
							window.location.href = window.location.href;
						}, error: function (jqXHR, textStatus, errorThrown) {
							console.error("Ajax request failed: " + textStatus, errorThrown);
						}
					});
				});

				// refuse 클릭 이벤트
				$("#refuse").off().on("click", function (event) {
					$.ajax({
						url: 'refuseUser.do',
						dataType: 'json',
						data: {
							id: res[index].id,
							groupNo: res[index].groupNo
						},
						success: function () {
							console.log("거절 통신 성공");
							$("#calendarModal").modal('hide');
							$("#applicantLink" + index).remove();
							window.location.href = window.location.href;
						}
					});
				});
			});

			$.ajax({
				url: "kingComm.do?groupNo=" + GroupNo,
				dataType: 'json',
				success: function (res) {
					console.log("통신성공");
					console.log(res);

					if (res.length == 0) {
						$("#applicant").append("<h2>신청자가 없습니다</h2>");
					} else {
						for (var i = 0; i < res.length; i++) {
							$("#applicant").append("<h2><a id='applicantLink" + i + "' href='#' data-toggle='modal' data-target='#calendarModal' data-index='" + i + "' data-res='" + JSON.stringify(res) + "'>" + res[i].id + "</a></h2>");
						}
					}
				}
			});
		});
		$(document).ready(function () {
		
        $.ajax({
            url: 'getGroupName.do?groupNo='+GroupNo,  
            dataType: 'json',
            success: function (data) {
              
                $('#dd').text(data.groupName);
                $('#groupinfo').text(data.groupInfo)
            },
            error: function (xhr, status, error) {
                console.error('그룹 이름을 가져오는 중 오류 발생:', error);
                console.log(xhr);
            }
        });
    });
    window.onload = function() {
            var ddElement = document.getElementById('dd');
            var textWidth = ddElement.offsetWidth;

            var marginLeft = (window.innerWidth - textWidth) / 2;
   
            var leftMargin = -600;

            ddElement.style.marginLeft = (marginLeft + leftMargin) + 'px';
        };
	</script>

</body>

</html>